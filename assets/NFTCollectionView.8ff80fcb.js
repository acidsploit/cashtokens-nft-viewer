import{d as V,bG as B,u as T,a as D,b as E,J as b,o as q,bb as z,ad as A,c as l,e as r,f as k,S as G,g as d,h as P,i as c,t as u,F as g,j as U,l as i,bh as j,bB as J,_ as M}from"./index.e3543761.js";import{d as O,P as H,A as w}from"./PageLoading.f9e33d71.js";const K={key:1},Q={key:2,class:"wrapper container"},R={class:"collection-header"},W={class:"collection-name"},X={class:"collection-address"},Y={class:"nft-container"},Z={class:"img"},x=["src","onLoad"],ee={key:0,class:"spinner"},te={key:0,class:"commitment"},se={key:1,class:"commitment"},ae=V({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup($){const n=$,_=B(),I=T(),o=D(),v=E(),a=b(void 0),m=b({});function f(){a.value?.utxos.forEach(e=>{m.value[e.txid+e.vout]=!0})}q(async()=>{o.result.address!==n.address?await o.search("path",n.address,n.tokenId).then(()=>{a.value=o.result.tokens.find(e=>e.id===n.tokenId),f()}):(a.value=o.result.tokens.find(e=>e.id===n.tokenId),f())}),z([()=>n.address,()=>n.tokenId],async([e,s])=>{a.value=void 0,await o.search("path",e,s).then(()=>{a.value=o.result.tokens.find(t=>t.id===s),f()})});function C(e,s,t){let p=`${s}/${t}`;v.add(p,e)}function F(e,s){let t=`${e}/${s}`;v.remove(t)}async function S(e,s){const t=window.location.origin,p=O.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${s}`).then(()=>{p.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const h=A(()=>a.value?.bcmr?.name?a.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function N(e){return e?a.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?a.value.bcmr.token.nfts.parse.types[e].name:e:""}function y(e){if(e.slice(0,7)==="ipfs://"){let s=I.ipfsGateway,t=e.slice(7);e=s+t}return e}function L(e){if(e.token?.commitment!==void 0&&a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let s=a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(s!==void 0)return y(s)}if(a.value?.bcmr?.uris!==void 0){let s=a.value?.bcmr?.uris?.icon;if(s!==void 0)return y(s)}return""}return(e,s)=>(i(),l(g,null,[r(o).error!==null?(i(),k(G,{key:0,error:r(o).error,type:"page"},null,8,["error"])):d("",!0),a.value===void 0?(i(),l("div",K,[P(H)])):d("",!0),a.value!==void 0?(i(),l("div",Q,[c("div",R,[c("h3",W,u(h.value),1),c("div",X,[c("div",null,"On address: "+u(r(o).result.wallet?.tokenaddr),1),c("div",null,"Child NFTs: "+u(a.value?.amount),1)]),c("span",{class:"share material-symbols-outlined",onClick:s[0]||(s[0]=t=>S(r(o).result.wallet?.cashaddr,n.tokenId))}," share "),r(v).isFav(`${r(o).result.wallet?.cashaddr}/${n.tokenId}`)?d("",!0):(i(),l("span",{key:0,class:"favorite material-symbols-outlined",onClick:s[1]||(s[1]=t=>C(h.value,r(o).result.wallet?.cashaddr,n.tokenId))}," favorite ")),r(v).isFav(`${r(o).result.wallet?.cashaddr}/${n.tokenId}`)?(i(),l("span",{key:1,class:"favorite material-symbols-outlined red",onClick:s[2]||(s[2]=t=>F(r(o).result.wallet?.cashaddr,n.tokenId))}," favorite ")):d("",!0)]),c("div",Y,[(i(!0),l(g,null,U(a.value?.utxos,t=>(i(),l("div",{class:"nft-card",key:t.txid+t.vout},[c("div",Z,[j(c("img",{src:L(t),onLoad:p=>m.value[t.txid+t.vout]=!1},null,40,x),[[J,!m.value[t.txid+t.vout]]]),m.value[t.txid+t.vout]?(i(),l("div",ee,[r(_)?(i(),k(r(w),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):d("",!0),r(_)?d("",!0):(i(),k(r(w),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):d("",!0)]),c("p",null,u(N(t.token?.commitment)),1),t.token?.capability!=="none"?(i(),l("p",te,"Capability: "+u(t.token?.capability),1)):d("",!0),t.token?.commitment?(i(),l("p",se,"Commitment: "+u(t.token?.commitment),1)):d("",!0)]))),128))])])):d("",!0)],64))}});const re=M(ae,[["__scopeId","data-v-4d401b64"]]);export{re as default};
