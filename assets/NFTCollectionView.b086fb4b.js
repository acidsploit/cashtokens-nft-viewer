import{d as L,ae as A,c as u,i as s,t as r,p as D,k as V,l as c,_ as B,bG as R,u as J,a as O,b as Q,K as h,o as W,w as X,e as l,f as $,S as Y,g as v,h as S,bh as w,bB as I,F as N,j as Z,bH as ee}from"./index.2d044f1d.js";import{d as q,P as te,A as T}from"./PageLoading.b69e683f.js";const E=d=>(D("data-v-9c363a8e"),d=d(),V(),d),se={class:"mono"},oe={class:"mono bold"},ae={class:"mono"},ne=E(()=>s("div",{class:"mono"}," ... ",-1)),ie={class:"mono"},re={class:"mono bold"},le=E(()=>s("span",{class:"pointer material-symbols-outlined"}," content_copy ",-1)),ce=L({__name:"CashAddress",props:{addr:{type:String,required:!0}},setup(d){const n=d,p=A(()=>n.addr);async function y(){const i=q.exports.useToast();await navigator.clipboard.writeText(n.addr).then(()=>{i.open({message:"Address copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(i,m)=>(c(),u("div",{onClick:y,class:"wrapper pointer"},[s("div",se,r(p.value.slice(0,12)),1),s("div",oe,r(p.value.slice(12,14)),1),s("div",ae,r(p.value.slice(14,18)),1),ne,s("div",ie,r(p.value.slice(-6,-2)),1),s("div",re,r(p.value.slice(-2)),1),le]))}});const de=B(ce,[["__scopeId","data-v-9c363a8e"]]),x=d=>(D("data-v-f9bce18c"),d=d(),V(),d),ue={key:1},ve={key:2,class:"wrapper container"},pe={class:"header"},me={class:"name"},_e={class:"actions"},fe={class:"metadata container"},ke={class:"address"},he={class:"mono"},ye={class:"is-vertical-align"},be=x(()=>s("span",null,"Description:",-1)),ge={class:"is-vertical-align"},$e=x(()=>s("span",null,"Links:",-1)),we={class:"nft-container"},Ie=["onClick"],Ce={class:"img"},Fe=["src","onLoad"],Se={key:0,class:"spinner"},Ne={key:0,class:"commitment mono"},Te={key:1,class:"commitment mono"},Le=L({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(d){const n=d,p=R(),y=J(),i=O(),m=Q(),a=h(void 0),k=h({}),_=h(!1),b=h(!1);function g(){a.value?.utxos.forEach(e=>{k.value[e.txid+e.vout]=!0})}W(async()=>{i.result.address!==n.address?await i.search("props",n.address,n.tokenId).then(()=>{a.value=i.result.tokens.find(e=>e.id===n.tokenId),g()}):(a.value=i.result.tokens.find(e=>e.id===n.tokenId),g())}),X([()=>n.address,()=>n.tokenId],async([e,o])=>{a.value=void 0,await i.search("props",e,o).then(()=>{a.value=i.result.tokens.find(t=>t.id===o),g()})});function z(e,o,t){let f=`${o}/${t}`;m.add(f,e)}function G(e,o){let t=`${e}/${o}`;m.remove(t)}async function P(e,o){const t=window.location.origin,f=q.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${o}`).then(()=>{f.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const C=A(()=>a.value?.bcmr?.name?a.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function U(e){return e?a.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?a.value.bcmr.token.nfts.parse.types[e].name:e:""}function F(e){if(e.slice(0,7)==="ipfs://"){let o=y.ipfsGateway,t=e.slice(7);e=o+t}return e}function j(e){if(e.token?.commitment!==void 0&&a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let o=a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(o!==void 0)return F(o)}if(a.value?.bcmr?.uris!==void 0){let o=a.value?.bcmr?.uris?.icon;if(o!==void 0)return F(o)}return""}function H(e){e.token?.commitment!=null&&e.token.capability!=="minting"&&ee.push(`/nft/${n.address}/${n.tokenId}/${e.token?.commitment}`)}function K(){_.value=!_.value}function M(){b.value=!b.value}return(e,o)=>(c(),u(N,null,[l(i).error!==null?(c(),$(Y,{key:0,error:l(i).error,type:"page"},null,8,["error"])):v("",!0),a.value===void 0?(c(),u("div",ue,[S(te)])):v("",!0),a.value!==void 0?(c(),u("div",ve,[s("div",pe,[s("h3",me,r(C.value),1),s("div",_e,[s("span",{class:"share material-symbols-outlined",onClick:o[0]||(o[0]=t=>P(l(i).result.wallet?.cashaddr,n.tokenId)),title:"Copy shareable link"}," share "),l(m).isFav(`${l(i).result.wallet?.cashaddr}/${n.tokenId}`)?v("",!0):(c(),u("span",{key:0,class:"favorite material-symbols-outlined",onClick:o[1]||(o[1]=t=>z(C.value,l(i).result.wallet?.cashaddr,n.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),l(m).isFav(`${l(i).result.wallet?.cashaddr}/${n.tokenId}`)?(c(),u("span",{key:1,class:"favorite material-symbols-outlined red",onClick:o[2]||(o[2]=t=>G(l(i).result.wallet?.cashaddr,n.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):v("",!0)])]),s("div",fe,[s("div",ke,[S(de,{addr:l(i).result.wallet?.tokenaddr},null,8,["addr"]),s("div",he,r(a.value?.amount)+" "+r(a.value.bcmr?.token?.symbol?`${a.value.bcmr?.token?.symbol}
          NFTs`:"NFTs"),1)]),s("div",ye,[s("span",{onClick:K,class:"material-symbols-outlined small pointer"},r(_.value?"expand_more":"chevron_right"),1),be]),w(s("div",null,r(a.value.bcmr?.description),513),[[I,_.value]]),s("div",ge,[s("span",{onClick:M,class:"material-symbols-outlined small pointer"},r(_.value?"expand_more":"chevron_right"),1),$e]),w(s("div",null,r(a.value.bcmr?.uris),513),[[I,b.value]])]),s("div",we,[(c(!0),u(N,null,Z(a.value?.utxos,t=>(c(),u("div",{class:"nft-card",key:t.txid+t.vout,onClick:f=>H(t)},[s("div",Ce,[w(s("img",{src:j(t),onLoad:f=>k.value[t.txid+t.vout]=!1},null,40,Fe),[[I,!k.value[t.txid+t.vout]]]),k.value[t.txid+t.vout]?(c(),u("div",Se,[l(p)?(c(),$(l(T),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):v("",!0),l(p)?v("",!0):(c(),$(l(T),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):v("",!0)]),s("p",null,r(U(t.token?.commitment)),1),t.token?.capability!=="none"?(c(),u("p",Ne,"Capability: "+r(t.token?.capability),1)):v("",!0),t.token?.commitment?(c(),u("p",Te,"Commitment: "+r(t.token?.commitment),1)):v("",!0)],8,Ie))),128))])])):v("",!0)],64))}});const Ve=B(Le,[["__scopeId","data-v-f9bce18c"]]);export{Ve as default};
