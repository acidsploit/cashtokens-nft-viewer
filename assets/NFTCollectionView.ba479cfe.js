import{d as T,P as b}from"./PageLoading.54644550.js";import{d as x,l as S,u as B,m as V,K as p,o as q,bd as L,af as D,c as i,b as n,j as E,S as U,e as d,a as P,f as l,t as u,F as w,r as j,h as r,_ as G}from"./index.af3cb151.js";const K={key:1},M={key:2,class:"wrapper container"},O={class:"collection-header"},Q={class:"collection-name"},z={class:"collection-address"},A={class:"nft-container"},H=["src"],J={class:"commitment"},R=x({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(g){const s=g,I=S(),e=B(),m=V(),y=p(0),h=p([]),c=p([]),v=p("");q(async()=>{e.validatedQuery.query===s.address?await k():(e.query=s.address,e.type="path",await e.search(s.tokenId).then(async()=>{await k()}))}),L([()=>s.address,()=>s.tokenId],async([t,a])=>{e.query=t,e.type="path",c.value=[],await e.search(a).then(async()=>{await k()})});async function k(){c.value=[],v.value=e.getNftCollectionNameById(s.tokenId),y.value=e.wallet?await e.wallet.getNftTokenBalance(s.tokenId):0,h.value=e.wallet?await e.wallet.getTokenUtxos(s.tokenId):[],h.value.forEach(t=>{if(t.token?.tokenId&&t.token?.commitment){let a=e.getNftDetailByCommitment(t.token.tokenId,t.token.commitment);a&&c.value.push({id:t.token.tokenId,commitment:t.token.commitment,nftType:a})}})}const _=D(()=>v.value?v.value:`${s.tokenId.slice(0,4)}...${s.tokenId.slice(-4)}`);function $(t){if(t&&t.slice(0,7)==="ipfs://"){let a=I.ipfsGateway,o=t.slice(7);return a+o}else if(t)return t}function N(t,a,o){let f=`${a}/${o}`;m.add(f,t)}function C(t,a){let o=`${t}/${a}`;m.remove(o)}async function F(t,a){const o=window.location.origin,f=T.exports.useToast();await navigator.clipboard.writeText(`${o}/collection/${t}/${a}`).then(()=>{f.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(t,a)=>(r(),i(w,null,[n(e).error!==null?(r(),E(U,{key:0,error:n(e).error,type:"page"},null,8,["error"])):d("",!0),c.value.length===0&&n(e).error===null?(r(),i("div",K,[P(b)])):d("",!0),c.value.length!==0?(r(),i("div",M,[l("div",O,[l("h3",Q,u(_.value),1),l("div",z,[l("div",null,"On address: "+u(n(e).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+u(y.value),1)]),l("span",{class:"share material-symbols-outlined",onClick:a[0]||(a[0]=o=>F(n(e).wallet?.cashaddr,s.tokenId))}," share "),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?d("",!0):(r(),i("span",{key:0,class:"favorite material-symbols-outlined",onClick:a[1]||(a[1]=o=>N(_.value,n(e).wallet?.cashaddr,s.tokenId))}," favorite ")),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?(r(),i("span",{key:1,class:"favorite material-symbols-outlined red",onClick:a[2]||(a[2]=o=>C(n(e).wallet?.cashaddr,s.tokenId))}," favorite ")):d("",!0)]),l("div",A,[(r(!0),i(w,null,j(c.value,o=>(r(),i("div",{class:"nft-card",key:o.commitment},[o.nftType.uris?.icon?(r(),i("img",{key:0,src:$(o.nftType.uris.icon)},null,8,H)):d("",!0),l("p",null,u(o.nftType.name),1),l("p",J,"Commitment: "+u(o.commitment),1)]))),128))])])):d("",!0)],64))}});const Y=G(R,[["__scopeId","data-v-b4f954cb"]]);export{Y as default};
