import{d as N,i as C,u as T,j as F,m as c,o as x,v as B,x as S,c as i,f as s,t as l,b as _,F as $,r as q,h as d,e as V,_ as D}from"./index.b3aff33c.js";const U={class:"container"},b={class:"collection-title"},E={class:"collection-name"},L={class:"collection-address"},j={class:"nft-container"},G=["src"],M={class:"commitment"},O=N({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(k){const o=k,y=C(),t=T(),h=F(),f=c(0),p=c([]),r=c([]),m=c("");x(async()=>{t.validatedQuery.query===o.address?await u():(t.query=o.address,t.type="path",await t.search(o.tokenId).then(async()=>{await u()}))}),B([()=>o.address,()=>o.tokenId],async([e,a])=>{t.query=e,t.type="path",await t.search(a).then(async()=>{await u()})});async function u(){r.value=[],m.value=t.getNftCollectionNameById(o.tokenId),f.value=t.wallet?await t.wallet.getNftTokenBalance(o.tokenId):0,p.value=t.wallet?await t.wallet.getTokenUtxos(o.tokenId):[],p.value.forEach(e=>{if(e.token?.tokenId&&e.token?.commitment){let a=t.getNftDetailByCommitment(e.token.tokenId,e.token.commitment);a&&r.value.push({id:e.token.tokenId,commitment:e.token.commitment,nftType:a})}})}const v=S(()=>(console.log(o.tokenId),console.log(`${o.tokenId.slice(0,4)}...${o.tokenId.slice(-4)}`),m.value?m.value:`${o.tokenId.slice(0,4)}...${o.tokenId.slice(-4)}`));function I(e){if(e&&e.slice(0,7)==="ipfs://"){let a=y.ipfsGateway,n=e.slice(7);return a+n}else if(e)return e}function w(e,a,n){let g=`${a}/${n}`;h.add(g,e)}return(e,a)=>(d(),i("div",U,[s("div",b,[s("h3",E,l(v.value),1),s("div",L,[s("div",null,"On address: "+l(_(t).wallet?.tokenaddr),1),s("div",null,"Child NFTs: "+l(f.value),1)]),s("span",{class:"favorite material-symbols-outlined",onClick:a[0]||(a[0]=n=>w(v.value,_(t).wallet?.cashaddr,o.tokenId))}," favorite ")]),s("div",j,[(d(!0),i($,null,q(r.value,n=>(d(),i("div",{class:"nft-card",key:n.commitment},[n.nftType.uris?.icon?(d(),i("img",{key:0,src:I(n.nftType.uris.icon)},null,8,G)):V("",!0),s("p",null,l(n.nftType.name),1),s("p",M,"Commitment: "+l(n.commitment),1)]))),128))])]))}});const z=D(O,[["__scopeId","data-v-c6f5e3f5"]]);export{z as default};
