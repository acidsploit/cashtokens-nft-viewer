import{d as B,P as S}from"./PageLoading.3f99ab1e.js";import{d as x,l as V,u as q,m as L,K as k,o as M,bd as D,af as E,c as r,b as n,j as O,S as R,e as d,a as U,f as l,t as c,F as w,r as F,h as i,_ as P}from"./index.f98bf858.js";const j={key:1},G={key:2,class:"wrapper container"},J={class:"collection-header"},K={class:"collection-name"},Q={class:"collection-address"},z={class:"nft-container"},A=["src"],H={class:"commitment"},W={key:3,class:"wrapper container"},X={class:"collection-header"},Y={class:"collection-name"},Z={class:"collection-address"},ee={class:"nft-container"},te=["src"],ae={class:"commitment"},oe=x({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(b){const s=b,T=V(),e=q(),u=L(),y=k(0),g=k([]),m=k([]),v=k([]),h=k("");M(async()=>{e.validatedQuery.query===s.address?await f():(e.query=s.address,e.type="path",await e.search(s.tokenId).then(async()=>{await f()}))}),D([()=>s.address,()=>s.tokenId],async([o,t])=>{e.query=o,e.type="path",m.value=[],await e.search(t).then(async()=>{await f()})});async function f(){m.value=[],v.value=[],h.value=e.getNftCollectionNameById(s.tokenId),y.value=e.wallet?await e.wallet.getNftTokenBalance(s.tokenId):0,g.value=e.wallet?await e.wallet.getTokenUtxos(s.tokenId):[],g.value.forEach(o=>{if(o.token?.tokenId&&o.token?.commitment){let t=e.getNftCollectionById(o.token.tokenId);console.log(JSON.stringify(t,null,4));let a=e.getNftDetailByCommitment(o.token.tokenId,o.token.commitment);a?m.value.push({id:o.token.tokenId,commitment:o.token.commitment,nftType:a}):v.value.push({id:o.token.tokenId,category:t?.BCMR?.token?.category,symbol:t?.BCMR?.token?.symbol,icon:t?.BCMR?.uris?.icon})}})}const p=E(()=>h.value?h.value:`${s.tokenId.slice(0,4)}...${s.tokenId.slice(-4)}`);function I(o){if(o&&o.slice(0,7)==="ipfs://"){let t=T.ipfsGateway,a=o.slice(7);return t+a}else if(o)return o}function $(o,t,a){let _=`${t}/${a}`;u.add(_,o)}function C(o,t){let a=`${o}/${t}`;u.remove(a)}async function N(o,t){const a=window.location.origin,_=B.exports.useToast();await navigator.clipboard.writeText(`${a}/collection/${o}/${t}`).then(()=>{_.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(o,t)=>(i(),r(w,null,[n(e).error!==null?(i(),O(R,{key:0,error:n(e).error,type:"page"},null,8,["error"])):d("",!0),m.value.length===0&&v.value.length===0&&n(e).error===null?(i(),r("div",j,[U(S)])):d("",!0),m.value.length!==0?(i(),r("div",G,[l("div",J,[l("h3",K,c(p.value),1),l("div",Q,[l("div",null,"On address: "+c(n(e).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+c(y.value),1)]),l("span",{class:"share material-symbols-outlined",onClick:t[0]||(t[0]=a=>N(n(e).wallet?.cashaddr,s.tokenId))}," share "),n(u).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?d("",!0):(i(),r("span",{key:0,class:"favorite material-symbols-outlined",onClick:t[1]||(t[1]=a=>$(p.value,n(e).wallet?.cashaddr,s.tokenId))}," favorite ")),n(u).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?(i(),r("span",{key:1,class:"favorite material-symbols-outlined red",onClick:t[2]||(t[2]=a=>C(n(e).wallet?.cashaddr,s.tokenId))}," favorite ")):d("",!0)]),l("div",z,[(i(!0),r(w,null,F(m.value,a=>(i(),r("div",{class:"nft-card",key:a.commitment},[a.nftType.uris?.icon?(i(),r("img",{key:0,src:I(a.nftType.uris.icon)},null,8,A)):d("",!0),l("p",null,c(a.nftType.name),1),l("p",H,"Commitment: "+c(a.commitment),1)]))),128))])])):d("",!0),v.value.length!==0?(i(),r("div",W,[l("div",X,[l("h3",Y,c(p.value),1),l("div",Z,[l("div",null,"On address: "+c(n(e).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+c(y.value),1)]),l("span",{class:"share material-symbols-outlined",onClick:t[3]||(t[3]=a=>N(n(e).wallet?.cashaddr,s.tokenId))}," share "),n(u).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?d("",!0):(i(),r("span",{key:0,class:"favorite material-symbols-outlined",onClick:t[4]||(t[4]=a=>$(p.value,n(e).wallet?.cashaddr,s.tokenId))}," favorite ")),n(u).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?(i(),r("span",{key:1,class:"favorite material-symbols-outlined red",onClick:t[5]||(t[5]=a=>C(n(e).wallet?.cashaddr,s.tokenId))}," favorite ")):d("",!0)]),l("div",ee,[(i(!0),r(w,null,F(v.value,a=>(i(),r("div",{class:"nft-card",key:a.category},[a.icon?(i(),r("img",{key:0,src:I(a.icon)},null,8,te)):d("",!0),l("p",ae,"1 "+c(a.symbol),1)]))),128))])])):d("",!0)],64))}});const le=P(oe,[["__scopeId","data-v-81de70f3"]]);export{le as default};
