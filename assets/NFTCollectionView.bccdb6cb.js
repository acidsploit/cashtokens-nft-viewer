import{d as V,bG as B,u as D,a as A,b as E,J as b,o as q,bb as z,ad as G,c as l,e as i,f as k,S as P,g as d,h as U,i as c,t as u,F as g,j,l as r,bh as H,bB as J,bH as M,_ as O}from"./index.8d4a5262.js";import{d as R,P as K,A as $}from"./PageLoading.aad4c414.js";const Q={key:1},W={key:2,class:"wrapper container"},X={class:"collection-header"},Y={class:"collection-name"},Z={class:"collection-address"},x={class:"nft-container"},ee=["onClick"],te={class:"img"},se=["src","onLoad"],oe={key:0,class:"spinner"},ne={key:0,class:"commitment mono"},ae={key:1,class:"commitment mono"},ie=V({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(w){const n=w,_=B(),I=D(),a=A(),v=E(),o=b(void 0),p=b({});function f(){o.value?.utxos.forEach(e=>{p.value[e.txid+e.vout]=!0})}q(async()=>{a.result.address!==n.address?await a.search("props",n.address,n.tokenId).then(()=>{o.value=a.result.tokens.find(e=>e.id===n.tokenId),f()}):(o.value=a.result.tokens.find(e=>e.id===n.tokenId),f())}),z([()=>n.address,()=>n.tokenId],async([e,s])=>{o.value=void 0,await a.search("props",e,s).then(()=>{o.value=a.result.tokens.find(t=>t.id===s),f()})});function C(e,s,t){let m=`${s}/${t}`;v.add(m,e)}function F(e,s){let t=`${e}/${s}`;v.remove(t)}async function N(e,s){const t=window.location.origin,m=R.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${s}`).then(()=>{m.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const h=G(()=>o.value?.bcmr?.name?o.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function S(e){return e?o.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?o.value.bcmr.token.nfts.parse.types[e].name:e:""}function y(e){if(e.slice(0,7)==="ipfs://"){let s=I.ipfsGateway,t=e.slice(7);e=s+t}return e}function T(e){if(e.token?.commitment!==void 0&&o.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let s=o.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(s!==void 0)return y(s)}if(o.value?.bcmr?.uris!==void 0){let s=o.value?.bcmr?.uris?.icon;if(s!==void 0)return y(s)}return""}function L(e){e.token?.commitment!=null&&e.token.capability!=="minting"&&M.push(`/nft/${n.address}/${n.tokenId}/${e.token?.commitment}`)}return(e,s)=>(r(),l(g,null,[i(a).error!==null?(r(),k(P,{key:0,error:i(a).error,type:"page"},null,8,["error"])):d("",!0),o.value===void 0?(r(),l("div",Q,[U(K)])):d("",!0),o.value!==void 0?(r(),l("div",W,[c("div",X,[c("h3",Y,u(h.value),1),c("div",Z,[c("div",null,"On address: "+u(i(a).result.wallet?.tokenaddr),1),c("div",null,"Child NFTs: "+u(o.value?.amount),1)]),c("span",{class:"share material-symbols-outlined",onClick:s[0]||(s[0]=t=>N(i(a).result.wallet?.cashaddr,n.tokenId)),title:"Copy shareable link"}," share "),i(v).isFav(`${i(a).result.wallet?.cashaddr}/${n.tokenId}`)?d("",!0):(r(),l("span",{key:0,class:"favorite material-symbols-outlined",onClick:s[1]||(s[1]=t=>C(h.value,i(a).result.wallet?.cashaddr,n.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),i(v).isFav(`${i(a).result.wallet?.cashaddr}/${n.tokenId}`)?(r(),l("span",{key:1,class:"favorite material-symbols-outlined red",onClick:s[2]||(s[2]=t=>F(i(a).result.wallet?.cashaddr,n.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):d("",!0)]),c("div",x,[(r(!0),l(g,null,j(o.value?.utxos,t=>(r(),l("div",{class:"nft-card",key:t.txid+t.vout,onClick:m=>L(t)},[c("div",te,[H(c("img",{src:T(t),onLoad:m=>p.value[t.txid+t.vout]=!1},null,40,se),[[J,!p.value[t.txid+t.vout]]]),p.value[t.txid+t.vout]?(r(),l("div",oe,[i(_)?(r(),k(i($),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):d("",!0),i(_)?d("",!0):(r(),k(i($),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):d("",!0)]),c("p",null,u(S(t.token?.commitment)),1),t.token?.capability!=="none"?(r(),l("p",ne,"Capability: "+u(t.token?.capability),1)):d("",!0),t.token?.commitment?(r(),l("p",ae,"Commitment: "+u(t.token?.commitment),1)):d("",!0)],8,ee))),128))])])):d("",!0)],64))}});const de=O(ie,[["__scopeId","data-v-ff21d5e1"]]);export{de as default};
