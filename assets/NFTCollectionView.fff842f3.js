import{d as C,i as F,u as T,j as x,m,o as B,v as S,x as b,c as i,f as n,t as d,b as l,e as p,F as q,r as V,h as c,_ as D}from"./index.5b5caa0e.js";const U={class:"container"},E={class:"collection-title"},L={class:"collection-name"},j={class:"collection-address"},G={class:"nft-container"},M=["src"],O={class:"commitment"},Q=C({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(h){const a=h,I=F(),t=T(),r=x(),f=m(0),_=m([]),u=m([]),v=m("");B(async()=>{t.validatedQuery.query===a.address?await k():(t.query=a.address,t.type="path",await t.search(a.tokenId).then(async()=>{await k()}))}),S([()=>a.address,()=>a.tokenId],async([e,o])=>{t.query=e,t.type="path",await t.search(o).then(async()=>{await k()})});async function k(){u.value=[],v.value=t.getNftCollectionNameById(a.tokenId),f.value=t.wallet?await t.wallet.getNftTokenBalance(a.tokenId):0,_.value=t.wallet?await t.wallet.getTokenUtxos(a.tokenId):[],_.value.forEach(e=>{if(e.token?.tokenId&&e.token?.commitment){let o=t.getNftDetailByCommitment(e.token.tokenId,e.token.commitment);o&&u.value.push({id:e.token.tokenId,commitment:e.token.commitment,nftType:o})}})}const y=b(()=>(console.log(a.tokenId),console.log(`${a.tokenId.slice(0,4)}...${a.tokenId.slice(-4)}`),v.value?v.value:`${a.tokenId.slice(0,4)}...${a.tokenId.slice(-4)}`));function w(e){if(e&&e.slice(0,7)==="ipfs://"){let o=I.ipfsGateway,s=e.slice(7);return o+s}else if(e)return e}function g(e,o,s){let N=`${o}/${s}`;r.add(N,e)}function $(e,o){let s=`${e}/${o}`;r.remove(s)}return(e,o)=>(c(),i("div",U,[n("div",E,[n("h3",L,d(y.value),1),n("div",j,[n("div",null,"On address: "+d(l(t).wallet?.tokenaddr),1),n("div",null,"Child NFTs: "+d(f.value),1)]),l(r).isFav(`${l(t).wallet?.cashaddr}/${a.tokenId}`)?p("",!0):(c(),i("span",{key:0,class:"favorite material-symbols-outlined",onClick:o[0]||(o[0]=s=>g(y.value,l(t).wallet?.cashaddr,a.tokenId))}," favorite ")),l(r).isFav(`${l(t).wallet?.cashaddr}/${a.tokenId}`)?(c(),i("span",{key:1,class:"favorite material-symbols-outlined red",onClick:o[1]||(o[1]=s=>$(l(t).wallet?.cashaddr,a.tokenId))}," favorite ")):p("",!0)]),n("div",G,[(c(!0),i(q,null,V(u.value,s=>(c(),i("div",{class:"nft-card",key:s.commitment},[s.nftType.uris?.icon?(c(),i("img",{key:0,src:w(s.nftType.uris.icon)},null,8,M)):p("",!0),n("p",null,d(s.nftType.name),1),n("p",O,"Commitment: "+d(s.commitment),1)]))),128))])]))}});const A=D(Q,[["__scopeId","data-v-32ab674d"]]);export{A as default};
