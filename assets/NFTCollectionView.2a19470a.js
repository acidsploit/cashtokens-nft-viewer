import{d as V,ae as B,c as d,i as s,t as l,p as K,k as M,l as r,_ as x,bG as O,u as R,a as J,b as Q,K as y,o as W,w as X,e as c,f as C,S as Y,g as u,h as L,bh as b,bB as g,F as I,j as A,bH as Z}from"./index.55d309f4.js";import{d as q,P as ee,A as D}from"./PageLoading.cda833c6.js";const E=p=>(K("data-v-bfec0902"),p=p(),M(),p),te={class:"mono"},se={class:"mono bold text-primary"},oe={class:"mono"},ae=E(()=>s("div",{class:"mono"}," ... ",-1)),ne={class:"mono"},ie={class:"mono bold text-primary"},re=E(()=>s("span",{class:"pointer material-symbols-outlined"}," content_copy ",-1)),le=V({__name:"CashAddress",props:{addr:{type:String,required:!0}},setup(p){const n=p,v=B(()=>n.addr);async function $(){const i=q.exports.useToast();await navigator.clipboard.writeText(n.addr).then(()=>{i.open({message:"Address copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(i,_)=>(r(),d("div",{onClick:$,class:"address-wrapper pointer"},[s("div",te,l(v.value.slice(0,12)),1),s("div",se,l(v.value.slice(12,14)),1),s("div",oe,l(v.value.slice(14,18)),1),ae,s("div",ne,l(v.value.slice(-6,-2)),1),s("div",ie,l(v.value.slice(-2)),1),re]))}});const ce=x(le,[["__scopeId","data-v-bfec0902"]]),de={key:1},ue={key:2,class:"wrapper container"},ve={class:"header"},pe={class:"name"},me={class:"actions"},_e={class:"metadata container"},fe={class:"address"},ke={class:"mono"},he={class:"dropdown is-vertical-align"},ye={class:"dropdown is-vertical-align"},be={key:0},ge=["href"],$e={class:"nft-container"},we=["onClick"],Ce={class:"img"},Ie=["src","onLoad"],Fe={key:0,class:"spinner"},Se={key:0,class:"commitment mono"},Ne={key:1,class:"commitment mono"},Te=V({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(p){const n=p,v=O(),$=R(),i=J(),_=Q(),a=y(void 0),f=y({}),k=y(!1),h=y(!1);function w(){a.value?.utxos.forEach(e=>{f.value[e.txid+e.vout]=!0})}W(async()=>{i.result.address!==n.address?await i.search("props",n.address,n.tokenId).then(()=>{a.value=i.result.tokens.find(e=>e.id===n.tokenId),w()}):(a.value=i.result.tokens.find(e=>e.id===n.tokenId),w())}),X([()=>n.address,()=>n.tokenId],async([e,o])=>{a.value=void 0,await i.search("props",e,o).then(()=>{a.value=i.result.tokens.find(t=>t.id===o),w()})});function j(e,o,t){let m=`${o}/${t}`;_.add(m,e)}function z(e,o){let t=`${e}/${o}`;_.remove(t)}async function G(e,o){const t=window.location.origin,m=q.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${o}`).then(()=>{m.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const F=B(()=>a.value?.bcmr?.name?a.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function P(e){return e?a.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?a.value.bcmr.token.nfts.parse.types[e].name:e:""}function S(e){if(e.slice(0,7)==="ipfs://"){let o=$.ipfsGateway,t=e.slice(7);e=o+t}return e}function U(e){if(e.token?.commitment!==void 0&&a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let o=a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(o!==void 0)return S(o)}if(a.value?.bcmr?.uris!==void 0){let o=a.value?.bcmr?.uris?.icon;if(o!==void 0)return S(o)}return""}function H(e){e.token?.commitment!=null&&e.token.capability!=="minting"&&Z.push(`/nft/${n.address}/${n.tokenId}/${e.token?.commitment}`)}function N(){k.value=!k.value}function T(){h.value=!h.value}return(e,o)=>(r(),d(I,null,[c(i).error!==null?(r(),C(Y,{key:0,error:c(i).error,type:"page"},null,8,["error"])):u("",!0),a.value===void 0?(r(),d("div",de,[L(ee)])):u("",!0),a.value!==void 0?(r(),d("div",ue,[s("div",ve,[s("h3",pe,l(F.value),1),s("div",me,[s("span",{class:"share material-symbols-outlined",onClick:o[0]||(o[0]=t=>G(c(i).result.wallet?.cashaddr,n.tokenId)),title:"Copy shareable link"}," share "),c(_).isFav(`${c(i).result.wallet?.cashaddr}/${n.tokenId}`)?u("",!0):(r(),d("span",{key:0,class:"favorite material-symbols-outlined",onClick:o[1]||(o[1]=t=>j(F.value,c(i).result.wallet?.cashaddr,n.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),c(_).isFav(`${c(i).result.wallet?.cashaddr}/${n.tokenId}`)?(r(),d("span",{key:1,class:"favorite material-symbols-outlined red",onClick:o[2]||(o[2]=t=>z(c(i).result.wallet?.cashaddr,n.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):u("",!0)])]),s("div",_e,[s("div",fe,[L(ce,{addr:c(i).result.wallet?.tokenaddr},null,8,["addr"]),s("div",ke,l(a.value?.amount)+" "+l(a.value.bcmr?.token?.symbol?`${a.value.bcmr?.token?.symbol}
          NFTs`:"NFTs"),1)]),s("div",he,[s("span",{onClick:N,class:"material-symbols-outlined small pointer"},l(k.value?"expand_more":"chevron_right"),1),s("span",{onClick:N,class:"bold pointer"},"Description")]),b(s("div",null,l(a.value.bcmr?.description),513),[[g,k.value]]),s("div",ye,[s("span",{onClick:T,class:"material-symbols-outlined small pointer"},l(h.value?"expand_more":"chevron_right"),1),s("span",{onClick:T,class:"bold pointer"},"Links")]),b(s("div",null,[a.value.bcmr?.uris?(r(),d("div",be,[(r(!0),d(I,null,A(Object.entries(a.value.bcmr.uris),([t,m])=>b((r(),d("div",{class:"mono",key:t},[s("a",{href:m,target:"_blank"},l(t),9,ge)])),[[g,!["icon","image"].includes(t)]])),128))])):u("",!0)],512),[[g,h.value]])]),s("div",$e,[(r(!0),d(I,null,A(a.value?.utxos,t=>(r(),d("div",{class:"nft-card",key:t.txid+t.vout,onClick:m=>H(t)},[s("div",Ce,[b(s("img",{src:U(t),onLoad:m=>f.value[t.txid+t.vout]=!1},null,40,Ie),[[g,!f.value[t.txid+t.vout]]]),f.value[t.txid+t.vout]?(r(),d("div",Fe,[c(v)?(r(),C(c(D),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):u("",!0),c(v)?u("",!0):(r(),C(c(D),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):u("",!0)]),s("p",null,l(P(t.token?.commitment)),1),t.token?.capability!=="none"?(r(),d("p",Se,"Capability: "+l(t.token?.capability),1)):u("",!0),t.token?.commitment?(r(),d("p",Ne,"Commitment: "+l(t.token?.commitment),1)):u("",!0)],8,we))),128))])])):u("",!0)],64))}});const De=x(Te,[["__scopeId","data-v-14d31535"]]);export{De as default};
