import{d as S,P as V}from"./PageLoading.8c96efae.js";import{d as q,u as L,a as M,b as R,J as v,o as E,bb as U,ad as D,c as r,e as n,f as O,S as P,g as d,h as j,i as l,t as c,F as g,j as F,l as i,_ as x}from"./index.05497ae7.js";const G={key:1},J={key:2,class:"wrapper container"},Q={class:"collection-header"},z={class:"collection-name"},A={class:"collection-address"},H={class:"nft-container"},K=["src"],W={class:"commitment"},X={key:3,class:"wrapper container"},Y={class:"collection-header"},Z={class:"collection-name"},ee={class:"collection-address"},te={class:"nft-container"},ae=["src"],oe={class:"commitment"},se={class:"commitment"},ne={class:"commitment"},le=q({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(T){const s=T,B=L(),e=M(),m=R(),h=v(0),I=v([]),u=v([]),p=v([]),k=v({}),f=v("");E(async()=>{e.validatedQuery.query===s.address?await _():(e.query=s.address,e.type="path",await e.search(s.tokenId).then(async()=>{await _()}))}),U([()=>s.address,()=>s.tokenId],async([o,a])=>{e.query=o,e.type="path",u.value=[],await e.search(a).then(async()=>{await _()})});async function _(){u.value=[],p.value=[],k.value=e.getNftCollectionById(s.tokenId),f.value=e.getNftCollectionNameById(s.tokenId),h.value=e.wallet?await e.wallet.getNftTokenBalance(s.tokenId):0,I.value=e.wallet?await e.wallet.getTokenUtxos(s.tokenId):[],I.value.forEach(o=>{if(o.token?.tokenId&&o.token?.commitment){let a=e.getNftTypeByCommitment(o.token.tokenId,o.token.commitment);a?u.value.push({id:o.token.tokenId,commitment:o.token.commitment,nftType:a}):p.value.push({id:o.token.tokenId,category:k.value?.BCMR?.token?.category,symbol:k.value?.BCMR?.token?.symbol,icon:k.value?.BCMR?.uris?.icon,commitment:o.token.commitment,capability:o.token.capability})}})}const y=D(()=>f.value?f.value:`${s.tokenId.slice(0,4)}...${s.tokenId.slice(-4)}`);function C(o){if(o&&o.slice(0,7)==="ipfs://"){let a=B.ipfsGateway,t=o.slice(7);return a+t}else if(o)return o}function $(o,a,t){let w=`${a}/${t}`;m.add(w,o)}function b(o,a){let t=`${o}/${a}`;m.remove(t)}async function N(o,a){const t=window.location.origin,w=S.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${o}/${a}`).then(()=>{w.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(o,a)=>(i(),r(g,null,[n(e).error!==null?(i(),O(P,{key:0,error:n(e).error,type:"page"},null,8,["error"])):d("",!0),u.value.length===0&&p.value.length===0&&n(e).error===null?(i(),r("div",G,[j(V)])):d("",!0),u.value.length!==0?(i(),r("div",J,[l("div",Q,[l("h3",z,c(y.value),1),l("div",A,[l("div",null,"On address: "+c(n(e).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+c(h.value),1)]),l("span",{class:"share material-symbols-outlined",onClick:a[0]||(a[0]=t=>N(n(e).wallet?.cashaddr,s.tokenId))}," share "),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?d("",!0):(i(),r("span",{key:0,class:"favorite material-symbols-outlined",onClick:a[1]||(a[1]=t=>$(y.value,n(e).wallet?.cashaddr,s.tokenId))}," favorite ")),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?(i(),r("span",{key:1,class:"favorite material-symbols-outlined red",onClick:a[2]||(a[2]=t=>b(n(e).wallet?.cashaddr,s.tokenId))}," favorite ")):d("",!0)]),l("div",H,[(i(!0),r(g,null,F(u.value,t=>(i(),r("div",{class:"nft-card",key:t.commitment},[t.nftType.uris?.icon?(i(),r("img",{key:0,src:C(t.nftType.uris.icon)},null,8,K)):d("",!0),l("p",null,c(t.nftType.name),1),l("p",W,"Commitment: "+c(t.commitment),1)]))),128))])])):d("",!0),p.value.length!==0?(i(),r("div",X,[l("div",Y,[l("h3",Z,c(y.value),1),l("div",ee,[l("div",null,"On address: "+c(n(e).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+c(h.value),1)]),l("span",{class:"share material-symbols-outlined",onClick:a[3]||(a[3]=t=>N(n(e).wallet?.cashaddr,s.tokenId))}," share "),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?d("",!0):(i(),r("span",{key:0,class:"favorite material-symbols-outlined",onClick:a[4]||(a[4]=t=>$(y.value,n(e).wallet?.cashaddr,s.tokenId))}," favorite ")),n(m).isFav(`${n(e).wallet?.cashaddr}/${s.tokenId}`)?(i(),r("span",{key:1,class:"favorite material-symbols-outlined red",onClick:a[5]||(a[5]=t=>b(n(e).wallet?.cashaddr,s.tokenId))}," favorite ")):d("",!0)]),l("div",te,[(i(!0),r(g,null,F(p.value,t=>(i(),r("div",{class:"nft-card",key:t.category},[t.icon?(i(),r("img",{key:0,src:C(t.icon)},null,8,ae)):d("",!0),l("p",oe,"Capability: "+c(t.capability),1),l("p",se,"Commitment: "+c(t.commitment),1),l("p",ne,"1 "+c(t.symbol),1)]))),128))])])):d("",!0)],64))}});const ce=x(le,[["__scopeId","data-v-5992ff07"]]);export{ce as default};
