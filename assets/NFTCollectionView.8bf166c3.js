import{d as C,i as T,u as F,j as x,s as B,m as c,o as S,v as $,x as q,c as i,f as n,t as l,b as _,F as V,r as D,h as r,e as E,_ as U}from"./index.7a2308e0.js";const b={class:"container"},L={class:"collection-title"},j={class:"collection-name"},G={class:"collection-address"},M={class:"nft-container"},O=["src"],Q={class:"commitment"},R=C({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(k){const o=k,y=T(),e=F(),h=x(),{wallet:I}=B(e),f=c(0),p=c([]),d=c([]),m=c("");S(async()=>{e.validatedQuery.query===o.address?await u():(e.query=o.address,e.type="path",await e.search(o.tokenId).then(async()=>{await u()}))}),$(async()=>{e.query=o.address,e.type="path",await e.search(o.tokenId).then(async()=>{await u()})});async function u(){d.value=[],m.value=e.getNftCollectionNameById(o.tokenId),f.value=e.wallet?await e.wallet.getNftTokenBalance(o.tokenId):0,p.value=e.wallet?await e.wallet.getTokenUtxos(o.tokenId):[],p.value.forEach(t=>{if(t.token?.tokenId&&t.token?.commitment){let a=e.getNftDetailByCommitment(t.token.tokenId,t.token.commitment);a&&d.value.push({id:t.token.tokenId,commitment:t.token.commitment,nftType:a})}})}const v=q(()=>(console.log(o.tokenId),console.log(`${o.tokenId.slice(0,4)}...${o.tokenId.slice(-4)}`),m.value?m.value:`${o.tokenId.slice(0,4)}...${o.tokenId.slice(-4)}`));function w(t){if(t&&t.slice(0,7)==="ipfs://"){let a=y.ipfsGateway,s=t.slice(7);return a+s}else if(t)return t}function g(t,a,s){let N=`${a}/${s}`;h.add(N,t)}return(t,a)=>(r(),i("div",b,[n("div",L,[n("h3",j,l(v.value),1),n("div",G,[n("div",null,"On address: "+l(_(I)?.tokenaddr),1),n("div",null,"Child NFTs: "+l(f.value),1)]),n("span",{class:"favorite material-symbols-outlined",onClick:a[0]||(a[0]=s=>g(v.value,_(e).wallet?.cashaddr,o.tokenId))}," favorite ")]),n("div",M,[(r(!0),i(V,null,D(d.value,s=>(r(),i("div",{class:"nft-card",key:s.commitment},[s.nftType.uris?.icon?(r(),i("img",{key:0,src:w(s.nftType.uris.icon)},null,8,O)):E("",!0),n("p",null,l(s.nftType.name),1),n("p",Q,"Commitment: "+l(s.commitment),1)]))),128))])]))}});const A=U(R,[["__scopeId","data-v-f9298471"]]);export{A as default};
