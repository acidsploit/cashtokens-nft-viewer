import{d as L,bG as V,u as B,a as D,b as A,J as b,o as E,bb as q,ad as z,c as l,e as r,f as k,S as G,g as c,h as P,i as d,t as u,F as g,j as U,l as i,bh as j,bB as J,_ as M}from"./index.c267367d.js";import{d as O,P as R,A as w}from"./PageLoading.98d31787.js";const H={key:1},K={key:2,class:"wrapper container"},Q={class:"collection-header"},W={class:"collection-name"},X={class:"collection-address"},Y={class:"nft-container"},Z={class:"img"},x=["src","onLoad"],ee={key:0,class:"spinner"},te={key:0,class:"commitment"},se={key:1,class:"commitment"},ae=L({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup($){const o=$,h=V(),I=B(),n=D(),v=A(),a=b(void 0),m=b({});function f(){a.value?.utxos.forEach(e=>{m.value[e.txid+e.vout]=!0})}E(async()=>{n.result.address!==o.address?await n.search("path",o.address,o.tokenId).then(()=>{a.value=n.result.tokens.find(e=>e.id===o.tokenId),f()}):(a.value=n.result.tokens.find(e=>e.id===o.tokenId),f())}),q([()=>o.address,()=>o.tokenId],async([e,s])=>{a.value=void 0,await n.search("path",e,s).then(()=>{a.value=n.result.tokens.find(t=>t.id===s),f()})});function F(e,s,t){let p=`${s}/${t}`;v.add(p,e)}function C(e,s){let t=`${e}/${s}`;v.remove(t)}async function N(e,s){const t=window.location.origin,p=O.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${s}`).then(()=>{p.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const _=z(()=>a.value?.bcmr?.name?a.value?.bcmr?.name:`${o.tokenId.slice(0,4)}...${o.tokenId.slice(-4)}`);function S(e){return e?a.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?a.value.bcmr.token.nfts.parse.types[e].name:e:""}function y(e){if(e.slice(0,7)==="ipfs://"){let s=I.ipfsGateway,t=e.slice(7);e=s+t}return e}function T(e){if(e.token?.commitment!==void 0&&a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let s=a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(s!==void 0)return y(s)}if(a.value?.bcmr?.uris!==void 0){let s=a.value?.bcmr?.uris?.icon;if(s!==void 0)return y(s)}return""}return(e,s)=>(i(),l(g,null,[r(n).error!==null?(i(),k(G,{key:0,error:r(n).error,type:"page"},null,8,["error"])):c("",!0),a.value===void 0?(i(),l("div",H,[P(R)])):c("",!0),a.value!==void 0?(i(),l("div",K,[d("div",Q,[d("h3",W,u(_.value),1),d("div",X,[d("div",null,"On address: "+u(r(n).result.wallet?.tokenaddr),1),d("div",null,"Child NFTs: "+u(a.value?.amount),1)]),d("span",{class:"share material-symbols-outlined",onClick:s[0]||(s[0]=t=>N(r(n).result.wallet?.cashaddr,o.tokenId)),title:"Copy shareable link"}," share "),r(v).isFav(`${r(n).result.wallet?.cashaddr}/${o.tokenId}`)?c("",!0):(i(),l("span",{key:0,class:"favorite material-symbols-outlined",onClick:s[1]||(s[1]=t=>F(_.value,r(n).result.wallet?.cashaddr,o.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),r(v).isFav(`${r(n).result.wallet?.cashaddr}/${o.tokenId}`)?(i(),l("span",{key:1,class:"favorite material-symbols-outlined red",onClick:s[2]||(s[2]=t=>C(r(n).result.wallet?.cashaddr,o.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):c("",!0)]),d("div",Y,[(i(!0),l(g,null,U(a.value?.utxos,t=>(i(),l("div",{class:"nft-card",key:t.txid+t.vout},[d("div",Z,[j(d("img",{src:T(t),onLoad:p=>m.value[t.txid+t.vout]=!1},null,40,x),[[J,!m.value[t.txid+t.vout]]]),m.value[t.txid+t.vout]?(i(),l("div",ee,[r(h)?(i(),k(r(w),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):c("",!0),r(h)?c("",!0):(i(),k(r(w),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):c("",!0)]),d("p",null,u(S(t.token?.commitment)),1),t.token?.capability!=="none"?(i(),l("p",te,"Capability: "+u(t.token?.capability),1)):c("",!0),t.token?.commitment?(i(),l("p",se,"Commitment: "+u(t.token?.commitment),1)):c("",!0)]))),128))])])):c("",!0)],64))}});const re=M(ae,[["__scopeId","data-v-ba28ca92"]]);export{re as default};
