import{d as D,ae as V,c as d,i as s,t as r,p as H,k as K,l as c,_ as B,bG as M,u as R,a as J,b as O,K as y,o as Q,w as W,e as l,f as $,S as X,g as u,h as T,bh as w,bB as C,F as L,j as Y,bH as Z}from"./index.f2fb4205.js";import{d as q,P as ee,A}from"./PageLoading.5fb804a4.js";const E=p=>(H("data-v-cc156641"),p=p(),K(),p),te={class:"mono"},se={class:"mono bold"},oe={class:"mono"},ae=E(()=>s("div",{class:"mono"}," ... ",-1)),ne={class:"mono"},ie={class:"mono bold"},re=E(()=>s("span",{class:"pointer material-symbols-outlined"}," content_copy ",-1)),le=D({__name:"CashAddress",props:{addr:{type:String,required:!0}},setup(p){const n=p,v=V(()=>n.addr);async function b(){const i=q.exports.useToast();await navigator.clipboard.writeText(n.addr).then(()=>{i.open({message:"Address copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(i,m)=>(c(),d("div",{onClick:b,class:"wrapper pointer"},[s("div",te,r(v.value.slice(0,12)),1),s("div",se,r(v.value.slice(12,14)),1),s("div",oe,r(v.value.slice(14,18)),1),ae,s("div",ne,r(v.value.slice(-6,-2)),1),s("div",ie,r(v.value.slice(-2)),1),re]))}});const ce=B(le,[["__scopeId","data-v-cc156641"]]),de={key:1},ue={key:2,class:"wrapper container"},ve={class:"header"},pe={class:"name"},me={class:"actions"},_e={class:"metadata container"},ke={class:"address"},fe={class:"mono"},he={class:"is-vertical-align"},ye={class:"is-vertical-align"},be={class:"nft-container"},ge=["onClick"],$e={class:"img"},we=["src","onLoad"],Ce={key:0,class:"spinner"},Ie={key:0,class:"commitment mono"},Fe={key:1,class:"commitment mono"},Se=D({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(p){const n=p,v=M(),b=R(),i=J(),m=O(),a=y(void 0),k=y({}),f=y(!1),h=y(!1);function g(){a.value?.utxos.forEach(e=>{k.value[e.txid+e.vout]=!0})}Q(async()=>{i.result.address!==n.address?await i.search("props",n.address,n.tokenId).then(()=>{a.value=i.result.tokens.find(e=>e.id===n.tokenId),g()}):(a.value=i.result.tokens.find(e=>e.id===n.tokenId),g())}),W([()=>n.address,()=>n.tokenId],async([e,o])=>{a.value=void 0,await i.search("props",e,o).then(()=>{a.value=i.result.tokens.find(t=>t.id===o),g()})});function x(e,o,t){let _=`${o}/${t}`;m.add(_,e)}function z(e,o){let t=`${e}/${o}`;m.remove(t)}async function G(e,o){const t=window.location.origin,_=q.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${o}`).then(()=>{_.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const I=V(()=>a.value?.bcmr?.name?a.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function P(e){return e?a.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?a.value.bcmr.token.nfts.parse.types[e].name:e:""}function F(e){if(e.slice(0,7)==="ipfs://"){let o=b.ipfsGateway,t=e.slice(7);e=o+t}return e}function U(e){if(e.token?.commitment!==void 0&&a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let o=a.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(o!==void 0)return F(o)}if(a.value?.bcmr?.uris!==void 0){let o=a.value?.bcmr?.uris?.icon;if(o!==void 0)return F(o)}return""}function j(e){e.token?.commitment!=null&&e.token.capability!=="minting"&&Z.push(`/nft/${n.address}/${n.tokenId}/${e.token?.commitment}`)}function S(){f.value=!f.value}function N(){h.value=!h.value}return(e,o)=>(c(),d(L,null,[l(i).error!==null?(c(),$(X,{key:0,error:l(i).error,type:"page"},null,8,["error"])):u("",!0),a.value===void 0?(c(),d("div",de,[T(ee)])):u("",!0),a.value!==void 0?(c(),d("div",ue,[s("div",ve,[s("h3",pe,r(I.value),1),s("div",me,[s("span",{class:"share material-symbols-outlined",onClick:o[0]||(o[0]=t=>G(l(i).result.wallet?.cashaddr,n.tokenId)),title:"Copy shareable link"}," share "),l(m).isFav(`${l(i).result.wallet?.cashaddr}/${n.tokenId}`)?u("",!0):(c(),d("span",{key:0,class:"favorite material-symbols-outlined",onClick:o[1]||(o[1]=t=>x(I.value,l(i).result.wallet?.cashaddr,n.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),l(m).isFav(`${l(i).result.wallet?.cashaddr}/${n.tokenId}`)?(c(),d("span",{key:1,class:"favorite material-symbols-outlined red",onClick:o[2]||(o[2]=t=>z(l(i).result.wallet?.cashaddr,n.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):u("",!0)])]),s("div",_e,[s("div",ke,[T(ce,{addr:l(i).result.wallet?.tokenaddr},null,8,["addr"]),s("div",fe,r(a.value?.amount)+" "+r(a.value.bcmr?.token?.symbol?`${a.value.bcmr?.token?.symbol}
          NFTs`:"NFTs"),1)]),s("div",he,[s("span",{onClick:S,class:"material-symbols-outlined small pointer"},r(f.value?"expand_more":"chevron_right"),1),s("span",{onClick:S,class:"pointer"},"Description:")]),w(s("div",null,r(a.value.bcmr?.description),513),[[C,f.value]]),s("div",ye,[s("span",{onClick:N,class:"material-symbols-outlined small pointer"},r(h.value?"expand_more":"chevron_right"),1),s("span",{onClick:N,class:"pointer"},"Links:")]),w(s("div",null,r(a.value.bcmr?.uris),513),[[C,h.value]])]),s("div",be,[(c(!0),d(L,null,Y(a.value?.utxos,t=>(c(),d("div",{class:"nft-card",key:t.txid+t.vout,onClick:_=>j(t)},[s("div",$e,[w(s("img",{src:U(t),onLoad:_=>k.value[t.txid+t.vout]=!1},null,40,we),[[C,!k.value[t.txid+t.vout]]]),k.value[t.txid+t.vout]?(c(),d("div",Ce,[l(v)?(c(),$(l(A),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):u("",!0),l(v)?u("",!0):(c(),$(l(A),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):u("",!0)]),s("p",null,r(P(t.token?.commitment)),1),t.token?.capability!=="none"?(c(),d("p",Ie,"Capability: "+r(t.token?.capability),1)):u("",!0),t.token?.commitment?(c(),d("p",Fe,"Commitment: "+r(t.token?.commitment),1)):u("",!0)],8,ge))),128))])])):u("",!0)],64))}});const Le=B(Se,[["__scopeId","data-v-23f9c6cf"]]);export{Le as default};
