import{d as D,ae as V,c as d,i as s,t as l,p as K,k as M,l as i,_ as B,u as O,a as R,b as H,K as y,o as J,w as Q,e as c,f as w,S as W,g as u,h as T,bh as b,bB as g,F as C,j as L,bG as X}from"./index.80ab907b.js";import{d as x,P as Y,A}from"./PageLoading.f208e8b2.js";const q=p=>(K("data-v-bfec0902"),p=p(),M(),p),Z={class:"mono"},ee={class:"mono bold text-primary"},te={class:"mono"},se=q(()=>s("div",{class:"mono"}," ... ",-1)),oe={class:"mono"},ae={class:"mono bold text-primary"},ne=q(()=>s("span",{class:"pointer material-symbols-outlined"}," content_copy ",-1)),ie=D({__name:"CashAddress",props:{addr:{type:String,required:!0}},setup(p){const n=p,v=V(()=>n.addr);async function r(){const m=x.exports.useToast();await navigator.clipboard.writeText(n.addr).then(()=>{m.open({message:"Address copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(m,o)=>(i(),d("div",{onClick:r,class:"address-wrapper pointer"},[s("div",Z,l(v.value.slice(0,12)),1),s("div",ee,l(v.value.slice(12,14)),1),s("div",te,l(v.value.slice(14,18)),1),se,s("div",oe,l(v.value.slice(-6,-2)),1),s("div",ae,l(v.value.slice(-2)),1),ne]))}});const re=B(ie,[["__scopeId","data-v-bfec0902"]]),le={key:1},ce={key:2,class:"wrapper container"},de={class:"header"},ue={class:"name"},ve={class:"actions"},pe={class:"metadata"},me={class:"address"},_e={class:"mono"},fe={class:"dropdown is-vertical-align"},ke={class:"dropdown is-vertical-align"},he={key:0},ye=["href"],be={class:"nft-container"},ge=["onClick"],$e={class:"img"},we=["src","onLoad"],Ce={key:0,class:"spinner"},Ie={key:0,class:"commitment mono"},Fe={key:1,class:"commitment mono"},Se=D({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(p){const n=p,v=O(),r=R(),m=H(),o=y(void 0),f=y({}),k=y(!1),h=y(!1);function $(){o.value?.utxos.forEach(e=>{f.value[e.txid+e.vout]=!0})}J(async()=>{r.result.address!==n.address?await r.search("props",n.address,n.tokenId).then(()=>{o.value=r.result.tokens.find(e=>e.id===n.tokenId),$()}):(o.value=r.result.tokens.find(e=>e.id===n.tokenId),$())}),Q([()=>n.address,()=>n.tokenId],async([e,a])=>{o.value=void 0,await r.search("props",e,a).then(()=>{o.value=r.result.tokens.find(t=>t.id===a),$()})});function E(e,a,t){let _=`${a}/${t}`;m.add(_,e)}function j(e,a){let t=`${e}/${a}`;m.remove(t)}async function z(e,a){const t=window.location.origin,_=x.exports.useToast();await navigator.clipboard.writeText(`${t}/collection/${e}/${a}`).then(()=>{_.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const I=V(()=>o.value?.bcmr?.name?o.value?.bcmr?.name:`${n.tokenId.slice(0,4)}...${n.tokenId.slice(-4)}`);function G(e){return e?o.value?.bcmr?.token?.nfts?.parse?.types[e]?.name?o.value.bcmr.token.nfts.parse.types[e].name:e:""}function F(e){if(e.slice(0,7)==="ipfs://"){let a=v.ipfsGateway,t=e.slice(7);e=a+t}return e}function P(e){if(e.token?.commitment!==void 0&&o.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment]!==void 0){let a=o.value?.bcmr?.token?.nfts?.parse.types[e.token.commitment].uris?.icon;if(a!==void 0)return F(a)}if(o.value?.bcmr?.uris!==void 0){let a=o.value?.bcmr?.uris?.icon;if(a!==void 0)return F(a)}return""}function U(e){e.token?.commitment!=null&&e.token.capability!=="minting"&&X.push(`/nft/${n.address}/${n.tokenId}/${e.token?.commitment}`)}function S(){k.value=!k.value}function N(){h.value=!h.value}return(e,a)=>(i(),d(C,null,[c(r).error!==null?(i(),w(W,{key:0,error:c(r).error,type:"page"},null,8,["error"])):u("",!0),o.value===void 0?(i(),d("div",le,[T(Y)])):u("",!0),o.value!==void 0?(i(),d("div",ce,[s("div",de,[s("h3",ue,l(I.value),1),s("div",ve,[s("span",{class:"share material-symbols-outlined",onClick:a[0]||(a[0]=t=>z(c(r).result.wallet?.cashaddr,n.tokenId)),title:"Copy shareable link"}," share "),c(m).isFav(`${c(r).result.wallet?.cashaddr}/${n.tokenId}`)?u("",!0):(i(),d("span",{key:0,class:"favorite material-symbols-outlined",onClick:a[1]||(a[1]=t=>E(I.value,c(r).result.wallet?.cashaddr,n.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),c(m).isFav(`${c(r).result.wallet?.cashaddr}/${n.tokenId}`)?(i(),d("span",{key:1,class:"favorite material-symbols-outlined red",onClick:a[2]||(a[2]=t=>j(c(r).result.wallet?.cashaddr,n.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):u("",!0)])]),s("div",pe,[s("div",me,[T(re,{class:"ca",addr:c(r).result.wallet?.tokenaddr},null,8,["addr"]),s("div",_e,l(o.value?.amount)+" "+l(o.value.bcmr?.token?.symbol?`${o.value.bcmr?.token?.symbol}
          NFTs`:"NFTs"),1)]),s("div",fe,[s("span",{onClick:S,class:"material-symbols-outlined small pointer"},l(k.value?"expand_more":"chevron_right"),1),s("span",{onClick:S,class:"bold pointer"},"Description")]),b(s("div",null,l(o.value.bcmr?.description),513),[[g,k.value]]),s("div",ke,[s("span",{onClick:N,class:"material-symbols-outlined small pointer"},l(h.value?"expand_more":"chevron_right"),1),s("span",{onClick:N,class:"bold pointer"},"Links")]),o.value.bcmr?.uris?b((i(),d("div",he,[(i(!0),d(C,null,L(Object.entries(o.value.bcmr.uris),([t,_])=>b((i(),d("a",{key:t,class:"button outline primary mono",href:_,target:"_blank"},l(t),9,ye)),[[g,!["icon","image"].includes(t)]])),128))],512)),[[g,h.value]]):u("",!0)]),s("div",be,[(i(!0),d(C,null,L(o.value?.utxos,t=>(i(),d("div",{class:"nft-card",key:t.txid+t.vout,onClick:_=>U(t)},[s("div",$e,[b(s("img",{src:P(t),onLoad:_=>f.value[t.txid+t.vout]=!1},null,40,we),[[g,!f.value[t.txid+t.vout]]]),f.value[t.txid+t.vout]?(i(),d("div",Ce,[c(v).isDark?(i(),w(c(A),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):u("",!0),c(v).isDark?u("",!0):(i(),w(c(A),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):u("",!0)]),s("p",null,l(G(t.token?.commitment)),1),t.token?.capability!=="none"?(i(),d("p",Ie,"Capability: "+l(t.token?.capability),1)):u("",!0),t.token?.commitment?(i(),d("p",Fe,"Commitment: "+l(t.token?.commitment),1)):u("",!0)],8,ge))),128))])])):u("",!0)],64))}});const Le=B(Se,[["__scopeId","data-v-903cd573"]]);export{Le as default};
