import{d as F,i as T,u as x,j as B,v,o as S,y as V,z as b,c as n,a as q,e as r,f as l,t as u,b as c,F as h,r as D,h as i,_ as L}from"./index.477d5da8.js";import{P as U}from"./PageLoading.72e9a992.js";const E={key:0},P={key:1,class:"wrapper container"},j={class:"collection-title"},z={class:"collection-name"},G={class:"collection-address"},M={class:"nft-container"},O=["src"],Q={class:"commitment"},A=F({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(I){const a=I,w=T(),t=x(),m=B(),f=v(0),y=v([]),d=v([]),k=v("");S(async()=>{t.validatedQuery.query===a.address?await p():(t.query=a.address,t.type="path",await t.search(a.tokenId).then(async()=>{await p()}))}),V([()=>a.address,()=>a.tokenId],async([e,o])=>{t.query=e,t.type="path",await t.search(o).then(async()=>{await p()})});async function p(){d.value=[],k.value=t.getNftCollectionNameById(a.tokenId),f.value=t.wallet?await t.wallet.getNftTokenBalance(a.tokenId):0,y.value=t.wallet?await t.wallet.getTokenUtxos(a.tokenId):[],y.value.forEach(e=>{if(e.token?.tokenId&&e.token?.commitment){let o=t.getNftDetailByCommitment(e.token.tokenId,e.token.commitment);o&&d.value.push({id:e.token.tokenId,commitment:e.token.commitment,nftType:o})}})}const _=b(()=>(console.log(a.tokenId),console.log(`${a.tokenId.slice(0,4)}...${a.tokenId.slice(-4)}`),k.value?k.value:`${a.tokenId.slice(0,4)}...${a.tokenId.slice(-4)}`));function g(e){if(e&&e.slice(0,7)==="ipfs://"){let o=w.ipfsGateway,s=e.slice(7);return o+s}else if(e)return e}function N(e,o,s){let C=`${o}/${s}`;m.add(C,e)}function $(e,o){let s=`${e}/${o}`;m.remove(s)}return(e,o)=>(i(),n(h,null,[d.value.length===0?(i(),n("div",E,[q(U)])):r("",!0),d.value.length!==0?(i(),n("div",P,[l("div",j,[l("h3",z,u(_.value),1),l("div",G,[l("div",null,"On address: "+u(c(t).wallet?.tokenaddr),1),l("div",null,"Child NFTs: "+u(f.value),1)]),c(m).isFav(`${c(t).wallet?.cashaddr}/${a.tokenId}`)?r("",!0):(i(),n("span",{key:0,class:"favorite material-symbols-outlined",onClick:o[0]||(o[0]=s=>N(_.value,c(t).wallet?.cashaddr,a.tokenId))}," favorite ")),c(m).isFav(`${c(t).wallet?.cashaddr}/${a.tokenId}`)?(i(),n("span",{key:1,class:"favorite material-symbols-outlined red",onClick:o[1]||(o[1]=s=>$(c(t).wallet?.cashaddr,a.tokenId))}," favorite ")):r("",!0)]),l("div",M,[(i(!0),n(h,null,D(d.value,s=>(i(),n("div",{class:"nft-card",key:s.commitment},[s.nftType.uris?.icon?(i(),n("img",{key:0,src:g(s.nftType.uris.icon)},null,8,O)):r("",!0),l("p",null,u(s.nftType.name),1),l("p",Q,"Commitment: "+u(s.commitment),1)]))),128))])])):r("",!0)],64))}});const K=L(A,[["__scopeId","data-v-fa26d4b6"]]);export{K as default};
