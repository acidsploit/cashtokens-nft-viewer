import{d as V,ae as B,c as l,i as s,t as c,p as H,k as K,l as n,_ as x,bG as M,u as R,a as J,b as Q,K as g,o as W,w as X,e as d,f as I,S as Y,g as u,h as A,bh as k,bB as f,F as $,j as F,bH as Z}from"./index.d278e0ab.js";import{d as j,P as ee,A as D}from"./PageLoading.b46c15a8.js";const q=m=>(H("data-v-bfec0902"),m=m(),K(),m),te={class:"mono"},se={class:"mono bold text-primary"},oe={class:"mono"},ae=q(()=>s("div",{class:"mono"}," ... ",-1)),ne={class:"mono"},ie={class:"mono bold text-primary"},re=q(()=>s("span",{class:"pointer material-symbols-outlined"}," content_copy ",-1)),le=V({__name:"CashAddress",props:{addr:{type:String,required:!0}},setup(m){const i=m,v=B(()=>i.addr);async function w(){const r=j.exports.useToast();await navigator.clipboard.writeText(i.addr).then(()=>{r.open({message:"Address copied to clipboard",type:"success",position:"top-right",duration:5e3})})}return(r,_)=>(n(),l("div",{onClick:w,class:"address-wrapper pointer"},[s("div",te,c(v.value.slice(0,12)),1),s("div",se,c(v.value.slice(12,14)),1),s("div",oe,c(v.value.slice(14,18)),1),ae,s("div",ne,c(v.value.slice(-6,-2)),1),s("div",ie,c(v.value.slice(-2)),1),re]))}});const ce=x(le,[["__scopeId","data-v-bfec0902"]]),de={key:1},ue={key:2,class:"wrapper container"},ve={class:"header"},me={class:"name"},pe={class:"actions"},_e={class:"metadata container"},ke={class:"address"},fe={class:"mono"},he={class:"dropdown is-vertical-align"},ye={class:"dropdown is-vertical-align"},be={class:"table"},ge={key:0,class:"key"},$e={key:1,class:"value"},we={class:"nft-container"},Ce=["onClick"],Ie={class:"img"},Fe=["src","onLoad"],Se={key:0,class:"spinner"},Ne={key:0,class:"commitment mono"},Te={key:1,class:"commitment mono"},Le=V({__name:"NFTCollectionView",props:{address:{type:String,required:!0},tokenId:{type:String,required:!0}},setup(m){const i=m,v=M(),w=R(),r=J(),_=Q(),o=g(void 0),h=g({}),y=g(!1),b=g(!1);function C(){o.value?.utxos.forEach(t=>{h.value[t.txid+t.vout]=!0})}W(async()=>{r.result.address!==i.address?await r.search("props",i.address,i.tokenId).then(()=>{o.value=r.result.tokens.find(t=>t.id===i.tokenId),C()}):(o.value=r.result.tokens.find(t=>t.id===i.tokenId),C())}),X([()=>i.address,()=>i.tokenId],async([t,a])=>{o.value=void 0,await r.search("props",t,a).then(()=>{o.value=r.result.tokens.find(e=>e.id===a),C()})});function E(t,a,e){let p=`${a}/${e}`;_.add(p,t)}function z(t,a){let e=`${t}/${a}`;_.remove(e)}async function G(t,a){const e=window.location.origin,p=j.exports.useToast();await navigator.clipboard.writeText(`${e}/collection/${t}/${a}`).then(()=>{p.open({message:"Link copied to clipboard",type:"success",position:"top-right",duration:5e3})})}const S=B(()=>o.value?.bcmr?.name?o.value?.bcmr?.name:`${i.tokenId.slice(0,4)}...${i.tokenId.slice(-4)}`);function O(t){return t?o.value?.bcmr?.token?.nfts?.parse?.types[t]?.name?o.value.bcmr.token.nfts.parse.types[t].name:t:""}function N(t){if(t.slice(0,7)==="ipfs://"){let a=w.ipfsGateway,e=t.slice(7);t=a+e}return t}function P(t){if(t.token?.commitment!==void 0&&o.value?.bcmr?.token?.nfts?.parse.types[t.token.commitment]!==void 0){let a=o.value?.bcmr?.token?.nfts?.parse.types[t.token.commitment].uris?.icon;if(a!==void 0)return N(a)}if(o.value?.bcmr?.uris!==void 0){let a=o.value?.bcmr?.uris?.icon;if(a!==void 0)return N(a)}return""}function U(t){t.token?.commitment!=null&&t.token.capability!=="minting"&&Z.push(`/nft/${i.address}/${i.tokenId}/${t.token?.commitment}`)}function T(){y.value=!y.value}function L(){b.value=!b.value}return(t,a)=>(n(),l($,null,[d(r).error!==null?(n(),I(Y,{key:0,error:d(r).error,type:"page"},null,8,["error"])):u("",!0),o.value===void 0?(n(),l("div",de,[A(ee)])):u("",!0),o.value!==void 0?(n(),l("div",ue,[s("div",ve,[s("h3",me,c(S.value),1),s("div",pe,[s("span",{class:"share material-symbols-outlined",onClick:a[0]||(a[0]=e=>G(d(r).result.wallet?.cashaddr,i.tokenId)),title:"Copy shareable link"}," share "),d(_).isFav(`${d(r).result.wallet?.cashaddr}/${i.tokenId}`)?u("",!0):(n(),l("span",{key:0,class:"favorite material-symbols-outlined",onClick:a[1]||(a[1]=e=>E(S.value,d(r).result.wallet?.cashaddr,i.tokenId)),title:"Add NFT collection to favorites"}," favorite ")),d(_).isFav(`${d(r).result.wallet?.cashaddr}/${i.tokenId}`)?(n(),l("span",{key:1,class:"favorite material-symbols-outlined red",onClick:a[2]||(a[2]=e=>z(d(r).result.wallet?.cashaddr,i.tokenId)),title:"Remove NFT collection from favorites"}," favorite ")):u("",!0)])]),s("div",_e,[s("div",ke,[A(ce,{addr:d(r).result.wallet?.tokenaddr},null,8,["addr"]),s("div",fe,c(o.value?.amount)+" "+c(o.value.bcmr?.token?.symbol?`${o.value.bcmr?.token?.symbol}
          NFTs`:"NFTs"),1)]),s("div",he,[s("span",{onClick:T,class:"material-symbols-outlined small pointer"},c(y.value?"expand_more":"chevron_right"),1),s("span",{onClick:T,class:"bold pointer"},"Description")]),k(s("div",null,c(o.value.bcmr?.description),513),[[f,y.value]]),s("div",ye,[s("span",{onClick:L,class:"material-symbols-outlined small pointer"},c(b.value?"expand_more":"chevron_right"),1),s("span",{onClick:L,class:"bold pointer"},"Links")]),k(s("div",null,[s("div",be,[o.value.bcmr?.uris?(n(),l("div",ge,[(n(!0),l($,null,F(Object.entries(o.value.bcmr.uris),([e])=>k((n(),l("div",{class:"entry mono",key:e},c(e),1)),[[f,!["icon","image"].includes(e)]])),128))])):u("",!0),o.value.bcmr?.uris?(n(),l("div",$e,[(n(!0),l($,null,F(Object.entries(o.value.bcmr.uris),([e,p])=>k((n(),l("div",{class:"entry mono",key:e},c(p),1)),[[f,!["icon","image"].includes(e)]])),128))])):u("",!0)])],512),[[f,b.value]])]),s("div",we,[(n(!0),l($,null,F(o.value?.utxos,e=>(n(),l("div",{class:"nft-card",key:e.txid+e.vout,onClick:p=>U(e)},[s("div",Ie,[k(s("img",{src:P(e),onLoad:p=>h.value[e.txid+e.vout]=!1},null,40,Fe),[[f,!h.value[e.txid+e.vout]]]),h.value[e.txid+e.vout]?(n(),l("div",Se,[d(v)?(n(),I(d(D),{key:0,"animation-duration":1e3,size:60,color:"#00c3ff"})):u("",!0),d(v)?u("",!0):(n(),I(d(D),{key:1,"animation-duration":1e3,size:60,color:"#0ac18e"}))])):u("",!0)]),s("p",null,c(O(e.token?.commitment)),1),e.token?.capability!=="none"?(n(),l("p",Ne,"Capability: "+c(e.token?.capability),1)):u("",!0),e.token?.commitment?(n(),l("p",Te,"Commitment: "+c(e.token?.commitment),1)):u("",!0)],8,Ce))),128))])])):u("",!0)],64))}});const Ve=x(Le,[["__scopeId","data-v-4745eb07"]]);export{Ve as default};
